<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>ForgeOS</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Styles -->
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>

<body>

  <div class="wrap">

    <!-- =====================================================
         HERO
    ====================================================== -->
    <section class="hero">
      <h1 class="hero-title">ForgeOS</h1>
      <h2>
        Are you an AI startup? <br>
        Our quest is to build the world’s fastest web servers.
      </h2>
    </section>

    <!-- =====================================================
         PRIMARY HUMAN METRIC
    ====================================================== -->
    <section class="metric-group">

      <div class="metric-number fast" id="humanLatency">
        <span class="value">0</span>
        <span class="unit">ms</span>
      </div>

      <p>
        <button id="measureBtn" class="btn">
          Measure Human Latency
        </button>
      </p>

    </section>


    <h3>Human latency is how fast a system responds to a real user — from click to visible change. <br> Your finger
      hasn’t
      finished telling your brain yet.</h3>

    </section>

    <div class="forge-rule" aria-hidden="true"></div>

    <!-- =====================================================
         FORGE TWEAKS
    ====================================================== -->
    <section class="forge-tweaks">

      <h2 class="forge-tweaks-title">
        12 Hardcore Server Optimizations We Actually Use
      </h2>

      <p class="forge-tweaks-subtitle">
        Flask · Python · JavaScript · Nginx · Gunicorn · PostgreSQL
      </p>

      <div class="forge-tweaks-grid">

        <div class="forge-tweak">
          <span class="forge-num">01</span>
          <h3>TCP Fast Open</h3>
          <p>Allows data in the SYN handshake, reducing round-trip latency on repeat connections.</p>
        </div>

        <div class="forge-tweak">
          <span class="forge-num">02</span>
          <h3>BBR Congestion Control</h3>
          <p>Modern congestion control tuned for throughput and latency under real network conditions.</p>
        </div>

        <div class="forge-tweak">
          <span class="forge-num">03</span>
          <h3>Raised File Descriptor Limits</h3>
          <p>Kernel, user, and Nginx limits tuned to eliminate hidden concurrency ceilings.</p>
        </div>

        <div class="forge-tweak">
          <span class="forge-num">04</span>
          <h3>Nginx Worker Affinity</h3>
          <p>Workers pinned to CPU cores to reduce cache thrashing and context switching.</p>
        </div>

        <div class="forge-tweak">
          <span class="forge-num">05</span>
          <h3>Sendfile + TCP_NOPUSH</h3>
          <p>Optimized packet batching for fast, efficient payload delivery.</p>
        </div>

        <div class="forge-tweak">
          <span class="forge-num">06</span>
          <h3>Gunicorn Preload + COW</h3>
          <p>Application preloading for memory sharing and faster worker spawn.</p>
        </div>

        <div class="forge-tweak">
          <span class="forge-num">07</span>
          <h3>Worker Class by Workload</h3>
          <p>Sync, threaded, or async — selected based on real I/O behavior.</p>
        </div>

        <div class="forge-tweak">
          <span class="forge-num">08</span>
          <h3>Socket Keepalive Tuning</h3>
          <p>Prevents zombie connections without disrupting legitimate clients.</p>
        </div>

        <div class="forge-tweak">
          <span class="forge-num">09</span>
          <h3>Selective Nagle Disable</h3>
          <p>Latency-critical endpoints bypass buffering delays.</p>
        </div>

        <div class="forge-tweak">
          <span class="forge-num">10</span>
          <h3>Zero-Copy Static Delivery</h3>
          <p>Nginx serves static assets directly from kernel space.</p>
        </div>

        <div class="forge-tweak">
          <span class="forge-num">11</span>
          <h3>Systemd + Gunicorn Hardening</h3>
          <p>Socket activation, restart policy, and CPU accounting.</p>
        </div>

        <div class="forge-tweak">
          <span class="forge-num">12</span>
          <h3>Human-Perceived Latency Metrics</h3>
          <p>We measure click → screen update, not just charts.</p>
        </div>

      </div>

      <div class="forge-rule" aria-hidden="true"></div>

    </section>

    <!-- =====================================================
         FOOTER
    ====================================================== -->
    <footer class="foot">
      ForgeOS isn’t just a framework. · It’s hard-won latency discipline <br>
      We build customized Liquid Web Ubuntu Severs • <a href="mailto:info@preceptress.ai">Lets
        connect</a>
    </footer>

  </div>

  <!-- =====================================================
       MINIMAL JS
  ====================================================== -->
  <script>
    document.addEventListener("DOMContentLoaded", () => {

      const output = document.getElementById("humanLatency");
      const button = document.getElementById("measureBtn");

      async function measureClickToResponse() {
        const start = performance.now();

        button.disabled = true;


        try {
          await fetch("/api/ping", { cache: "no-store" });
        } catch (err) {
          console.warn("Ping failed", err);
        }

        const elapsed = performance.now() - start;

        output.querySelector(".value").textContent = elapsed.toFixed(1);

        button.textContent = "Measure Human Latency";
        button.disabled = false;

      }

      button.addEventListener("click", measureClickToResponse);
    });
  </script>

</body>

</html>
